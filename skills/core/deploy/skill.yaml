# Deploy Skill Definition
# Universal format adapted by each agent integration

name: deploy
version: 1.0.0
description: Deploy application to target environment

inputs:
  environment:
    type: string
    description: Target deployment environment
    enum: [dev, staging, prod]
    required: true
  dry_run:
    type: boolean
    description: Simulate deployment without making changes
    default: false
  version:
    type: string
    description: Version tag to deploy (defaults to latest)
    required: false

steps:
  - name: validate
    description: Validate deployment configuration
    command: ${SKILLS_DIR}/shared/scripts/deploy-validate.sh
    args:
      - ${environment}
    
  - name: build
    description: Build application artifacts
    command: ${SKILLS_DIR}/shared/scripts/deploy-build.sh
    args:
      - --env=${environment}
      - --version=${version}
    
  - name: deploy
    description: Execute deployment
    command: ${SKILLS_DIR}/shared/scripts/deploy-execute.sh
    args:
      - --env=${environment}
      - --dry-run=${dry_run}
    skip_if: ${dry_run}

outputs:
  deployment_url:
    type: string
    description: URL of deployed application
  deployed_version:
    type: string
    description: Version that was deployed
  timestamp:
    type: string
    description: Deployment timestamp

# Agent-specific notes
agent_support:
  claude_code: full    # MCP + slash command
  goose: full          # MCP + toolkit
  codex: limited       # MCP only
  opencode: limited    # Instructions only
  cursor: minimal      # Documentation only
